const __vite__fileDeps=["assets/containerStatusDialog-C-25Uiy7.js","assets/containerStatusDialog.vue_vue_type_script_setup_true_lang-CjE5xE7j.js","assets/vue-CBJ4XcuP.js","assets/dashboard-BivZjTJN.js","assets/index-BXlEqNJQ.js","assets/common-CCg2oeMl.js","assets/popupForm-DSyaNqss.js","assets/testView-C10zbpuz.js","assets/iframe-Fxb6aEN_.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{l as M,u as S,m as O,i as f,e as C,c as L,r as p,n as w,o as m}from"./index-BXlEqNJQ.js";import{y as _,f as W,d as H,r as U,i as T,ae as k,af as P,a0 as v,ag as j,ah as z}from"./vue-CBJ4XcuP.js";function G(e=0){let t=e;const s={Default:70,Classic:50,Streamline:60};if(M()){const o=S();E().state.tabFullScreen||(t+=s[o.layout.layoutMode])}else t+=60;return{height:"calc(100vh - "+t.toString()+"px)"}}function $(){const e=document.querySelector(".nav-tabs");if(!e)return;const t=document.querySelector(".nav-bar"),s=document.querySelector(".nav-menus"),o=t.offsetWidth-(s.offsetWidth+20);e.style.width=o.toString()+"px"}const g=_(),ee=_(),te=W(()=>G()),ae=_(),ne=_(),E=H("navTabs",()=>{const e=U({activeIndex:0,activeRoute:null,tabsView:[],tabFullScreen:!1,tabsViewRoutes:[],authNode:new Map}),t=i=>{var n;(n=g.value)==null||n.closeTabByPath(i)},s=i=>{var n;(n=g.value)==null||n.closeAllTab(i)},o=(i,n)=>{var l;(l=g.value)==null||l.updateTabTitle(i,n)};function a(i){const n={...i,matched:[],meta:{...i.meta}};if(!n.meta.addtab)return;const l=R(n);l&&l.meta&&(n.name=l.name,n.meta.id=l.meta.id,n.meta.title=l.meta.title);for(const u in e.tabsView)if(e.tabsView[u].meta.id===n.meta.id||e.tabsView[u].fullPath==n.fullPath){e.tabsView[u].fullPath=n.fullPath,e.tabsView[u].params=T(n.params)?e.tabsView[u].params:n.params,e.tabsView[u].query=T(n.query)?e.tabsView[u].query:n.query;return}typeof n.meta.title=="string"&&(n.meta.title=f.global.te(n.meta.title)?f.global.t(n.meta.title):n.meta.title),e.tabsView.push(n)}const r=i=>{const n=e.tabsView.findIndex(l=>l.fullPath===i.fullPath);n!==-1&&(e.activeRoute=i,e.activeIndex=n)};function c(i){e.tabsView.map((n,l)=>{if(n.fullPath==i.fullPath){e.tabsView.splice(l,1);return}})}const d=(i=!1)=>{i?e.tabsView=[i]:e.tabsView=[]},b=(i,n)=>{for(const l in e.tabsView)if(e.tabsView[l].fullPath==i){e.tabsView[l].meta.title=n;break}},B=i=>{e.tabsViewRoutes=I(i)},D=(i,n)=>{e.authNode.set(i,n)},F=i=>{e.authNode=i},q=i=>{e.tabFullScreen=i},R=(i,n="normal")=>{let l=y(i.fullPath,e.tabsViewRoutes,n);return l?(l.meta.matched=i.fullPath,l):(l=y(i.path,e.tabsViewRoutes,n),l?(l.meta.matched=i.path,l):!1)},y=(i,n,l)=>{var u;for(const h in n){if(n[h].path===i)return n[h];if(n[h].children&&((u=n[h].children)!=null&&u.length)){const V=y(i,n[h].children,l);if(V)return l=="above"?n[h]:V}}return!1};return{state:e,closeAllTab:s,closeTabByPath:t,updateTabTitle:o,setTabsViewRoutes:B,setAuthNode:D,fillAuthNode:F,setFullScreen:q,getTabsViewDataByPath:y,getTabsViewDataByRoute:R,_addTab:a,_closeTab:c,_closeTabs:d,_setActiveRoute:r,_updateTabTitle:b}},{persist:{key:O,pick:["state.tabFullScreen"]}});function I(e){return e.forEach(t=>{var s;((s=t.meta)==null?void 0:s.menu_type)=="iframe"&&(t.path=C+"/iframe/"+encodeURIComponent(t.path)),t.children&&t.children.length&&(t.children=I(t.children))}),e}const ie=function(e="shade",t){const s=document.querySelector(".layout-container"),o=document.createElement("div");o.setAttribute("class","ba-layout-shade "+e),s.appendChild(o),L(o,"click",()=>N(t))},N=function(e=()=>{}){const t=document.querySelector(".ba-layout-shade");t&&t.remove(),e()},J=async e=>{try{const t=await p.push(e);k(t,P.aborted)?v({message:f.global.t("utils.Navigation failed, navigation guard intercepted!"),type:"error"}):k(t,P.duplicated)&&v({message:f.global.t("utils.Navigation failed, it is at the navigation target position!"),type:"warning"})}catch(t){v({message:f.global.t("utils.Navigation failed, invalid route!"),type:"error"}),console.error(t)}},K=e=>{var a,r;const t=[];p.getRoutes().forEach(c=>{c.path&&t.push(c.path)});let o=!1;for(const c in e){if(((a=e[c].meta)==null?void 0:a.type)=="menu"&&t.indexOf(e[c].path)!==-1)return e[c];if(e[c].children&&((r=e[c].children)!=null&&r.length)&&(o=K(e[c].children),o))return o}return o},se=e=>{var s;switch((s=e.meta)==null?void 0:s.menu_type){case"iframe":case"tab":J(e.path),console.log(e.path);break;case"link":window.open(e.path,"_blank");break;default:v({message:f.global.t("utils.Navigation failed, the menu type is unrecognized!"),type:"error"});break}const t=S();t.layout.shrink&&N(()=>{t.setLayout("menuCollapse",!0)})},oe=e=>{x(Object.assign({"/src/views/home/containerStatusDialog.vue":()=>m(()=>import("./containerStatusDialog-C-25Uiy7.js"),__vite__mapDeps([0,1,2])),"/src/views/home/dashboard.vue":()=>m(()=>import("./dashboard-BivZjTJN.js"),__vite__mapDeps([3,4,2,5,6,1])),"/src/views/home/popupForm.vue":()=>m(()=>import("./popupForm-DSyaNqss.js"),__vite__mapDeps([6,2,4])),"/src/views/home/testView.vue":()=>m(()=>import("./testView-C10zbpuz.js"),__vite__mapDeps([7,4,2]))}),e,w.name);const s=w.path+"/";E().setTabsViewRoutes(A(e,s))},A=(e,t="/",s=["menu","menu_dir"])=>{const o=[];for(const a in e){if(e[a].extend=="add_rules_only"||!s.includes(e[a].type)||e[a].type=="menu_dir"&&e[a].children&&!e[a].children.length||["route","menu","nav_user_menu","nav"].includes(e[a].type)&&(e[a].menu_type=="tab"&&!e[a].component||["link","iframe"].includes(e[a].menu_type)&&!e[a].url))continue;const r=["link","iframe"].includes(e[a].menu_type)?e[a].url:t+e[a].path;let c=[];e[a].children&&e[a].children.length>0&&(c=A(e[a].children,t,s)),o.push({path:r,name:e[a].name,component:e[a].component,meta:{id:e[a].id,title:e[a].title,icon:e[a].icon,keepalive:e[a].keepalive,menu_type:e[a].menu_type,type:e[a].type},children:c})}return o},x=(e,t,s,o=!1)=>{for(const a in t)t[a].extend!="add_menu_only"&&((t[a].menu_type=="tab"&&e[t[a].component]||t[a].menu_type=="iframe")&&Q(e,t[a],s,o),t[a].children&&t[a].children.length>0&&x(e,t[a].children,s,o))},Q=(e,t,s,o)=>{let a="",r;if(t.menu_type=="iframe"?(a=w.path+"/iframe/"+encodeURIComponent(t.url),r=()=>m(()=>import("./iframe-Fxb6aEN_.js"),__vite__mapDeps([8,2,4]))):(a=s?t.path:"/"+t.path,r=e[t.component]),t.menu_type=="tab"&&o){const d=X(t.name);if(d.length){for(const b in d)if(p.hasRoute(d[b])){s=d[b];break}}}const c={path:a,name:t.name,component:r,meta:{title:t.title,extend:t.extend,icon:t.icon,keepalive:t.keepalive,menu_type:t.menu_type,type:t.type,url:t.url,addtab:!0}};s?p.addRoute(s,c):p.addRoute(c)},X=e=>{const t=j(e.split("/")),s=[],o=[];for(const a in t)s.push(t[a]),parseInt(a)!=t.length-1&&o.push(s.join("/"));return z(o)};export{ne as a,g as b,N as c,ie as d,te as e,ee as f,K as g,oe as h,ae as l,G as m,se as o,J as r,$ as s,E as u};
