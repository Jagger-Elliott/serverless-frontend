const __vite__fileDeps=["assets/dashboard-YrQTmJM1.js","assets/index-8U1nzPLF.js","assets/vue-CBJ4XcuP.js","assets/common-tNueAM4S.js","assets/popupForm-Bs-qY_Nn.js","assets/testView-CHze10jC.js","assets/iframe-D37Ifi2L.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{l as C,u as S,m as D,i as h,e as O,c as L,r as m,n as w,o as y}from"./index-8U1nzPLF.js";import{y as _,f as W,d as H,r as U,i as T,ae as k,af as P,a0 as v,ag as j,ah as z}from"./vue-CBJ4XcuP.js";function G(e=0){let t=e;const s={Default:70,Classic:50,Streamline:60};if(C()){const l=S();E().state.tabFullScreen||(t+=s[l.layout.layoutMode])}else t+=60;return{height:"calc(100vh - "+t.toString()+"px)"}}function $(){const e=document.querySelector(".nav-tabs");if(!e)return;const t=document.querySelector(".nav-bar"),s=document.querySelector(".nav-menus"),l=t.offsetWidth-(s.offsetWidth+20);e.style.width=l.toString()+"px"}const g=_(),ee=_(),te=W(()=>G()),ae=_(),ne=_(),E=H("navTabs",()=>{const e=U({activeIndex:0,activeRoute:null,tabsView:[],tabFullScreen:!1,tabsViewRoutes:[],authNode:new Map}),t=i=>{var n;(n=g.value)==null||n.closeTabByPath(i)},s=i=>{var n;(n=g.value)==null||n.closeAllTab(i)},l=(i,n)=>{var o;(o=g.value)==null||o.updateTabTitle(i,n)};function a(i){const n={...i,matched:[],meta:{...i.meta}};if(!n.meta.addtab)return;const o=R(n);o&&o.meta&&(n.name=o.name,n.meta.id=o.meta.id,n.meta.title=o.meta.title);for(const u in e.tabsView)if(e.tabsView[u].meta.id===n.meta.id||e.tabsView[u].fullPath==n.fullPath){e.tabsView[u].fullPath=n.fullPath,e.tabsView[u].params=T(n.params)?e.tabsView[u].params:n.params,e.tabsView[u].query=T(n.query)?e.tabsView[u].query:n.query;return}typeof n.meta.title=="string"&&(n.meta.title=h.global.te(n.meta.title)?h.global.t(n.meta.title):n.meta.title),e.tabsView.push(n)}const r=i=>{const n=e.tabsView.findIndex(o=>o.fullPath===i.fullPath);n!==-1&&(e.activeRoute=i,e.activeIndex=n)};function c(i){e.tabsView.map((n,o)=>{if(n.fullPath==i.fullPath){e.tabsView.splice(o,1);return}})}const d=(i=!1)=>{i?e.tabsView=[i]:e.tabsView=[]},p=(i,n)=>{for(const o in e.tabsView)if(e.tabsView[o].fullPath==i){e.tabsView[o].meta.title=n;break}},B=i=>{e.tabsViewRoutes=I(i)},F=(i,n)=>{e.authNode.set(i,n)},q=i=>{e.authNode=i},M=i=>{e.tabFullScreen=i},R=(i,n="normal")=>{let o=b(i.fullPath,e.tabsViewRoutes,n);return o?(o.meta.matched=i.fullPath,o):(o=b(i.path,e.tabsViewRoutes,n),o?(o.meta.matched=i.path,o):!1)},b=(i,n,o)=>{var u;for(const f in n){if(n[f].path===i)return n[f];if(n[f].children&&((u=n[f].children)!=null&&u.length)){const V=b(i,n[f].children,o);if(V)return o=="above"?n[f]:V}}return!1};return{state:e,closeAllTab:s,closeTabByPath:t,updateTabTitle:l,setTabsViewRoutes:B,setAuthNode:F,fillAuthNode:q,setFullScreen:M,getTabsViewDataByPath:b,getTabsViewDataByRoute:R,_addTab:a,_closeTab:c,_closeTabs:d,_setActiveRoute:r,_updateTabTitle:p}},{persist:{key:D,pick:["state.tabFullScreen"]}});function I(e){return e.forEach(t=>{var s;((s=t.meta)==null?void 0:s.menu_type)=="iframe"&&(t.path=O+"/iframe/"+encodeURIComponent(t.path)),t.children&&t.children.length&&(t.children=I(t.children))}),e}const ie=function(e="shade",t){const s=document.querySelector(".layout-container"),l=document.createElement("div");l.setAttribute("class","ba-layout-shade "+e),s.appendChild(l),L(l,"click",()=>N(t))},N=function(e=()=>{}){const t=document.querySelector(".ba-layout-shade");t&&t.remove(),e()},J=async e=>{try{const t=await m.push(e);k(t,P.aborted)?v({message:h.global.t("utils.Navigation failed, navigation guard intercepted!"),type:"error"}):k(t,P.duplicated)&&v({message:h.global.t("utils.Navigation failed, it is at the navigation target position!"),type:"warning"})}catch(t){v({message:h.global.t("utils.Navigation failed, invalid route!"),type:"error"}),console.error(t)}},K=e=>{var a,r;const t=[];m.getRoutes().forEach(c=>{c.path&&t.push(c.path)});let l=!1;for(const c in e){if(((a=e[c].meta)==null?void 0:a.type)=="menu"&&t.indexOf(e[c].path)!==-1)return e[c];if(e[c].children&&((r=e[c].children)!=null&&r.length)&&(l=K(e[c].children),l))return l}return l},se=e=>{var s;switch((s=e.meta)==null?void 0:s.menu_type){case"iframe":case"tab":J(e.path),console.log(e.path);break;case"link":window.open(e.path,"_blank");break;default:v({message:h.global.t("utils.Navigation failed, the menu type is unrecognized!"),type:"error"});break}const t=S();t.layout.shrink&&N(()=>{t.setLayout("menuCollapse",!0)})},le=e=>{x(Object.assign({"/src/views/home/dashboard.vue":()=>y(()=>import("./dashboard-YrQTmJM1.js"),__vite__mapDeps([0,1,2,3,4])),"/src/views/home/popupForm.vue":()=>y(()=>import("./popupForm-Bs-qY_Nn.js"),__vite__mapDeps([4,2,1])),"/src/views/home/testView.vue":()=>y(()=>import("./testView-CHze10jC.js"),__vite__mapDeps([5,1,2]))}),e,w.name);const s=w.path+"/";E().setTabsViewRoutes(A(e,s))},A=(e,t="/",s=["menu","menu_dir"])=>{const l=[];for(const a in e){if(e[a].extend=="add_rules_only"||!s.includes(e[a].type)||e[a].type=="menu_dir"&&e[a].children&&!e[a].children.length||["route","menu","nav_user_menu","nav"].includes(e[a].type)&&(e[a].menu_type=="tab"&&!e[a].component||["link","iframe"].includes(e[a].menu_type)&&!e[a].url))continue;const r=["link","iframe"].includes(e[a].menu_type)?e[a].url:t+e[a].path;let c=[];e[a].children&&e[a].children.length>0&&(c=A(e[a].children,t,s)),l.push({path:r,name:e[a].name,component:e[a].component,meta:{id:e[a].id,title:e[a].title,icon:e[a].icon,keepalive:e[a].keepalive,menu_type:e[a].menu_type,type:e[a].type},children:c})}return l},x=(e,t,s,l=!1)=>{for(const a in t)t[a].extend!="add_menu_only"&&((t[a].menu_type=="tab"&&e[t[a].component]||t[a].menu_type=="iframe")&&Q(e,t[a],s,l),t[a].children&&t[a].children.length>0&&x(e,t[a].children,s,l))},Q=(e,t,s,l)=>{let a="",r;if(t.menu_type=="iframe"?(a=w.path+"/iframe/"+encodeURIComponent(t.url),r=()=>y(()=>import("./iframe-D37Ifi2L.js"),__vite__mapDeps([6,2,1]))):(a=s?t.path:"/"+t.path,r=e[t.component]),t.menu_type=="tab"&&l){const d=X(t.name);if(d.length){for(const p in d)if(m.hasRoute(d[p])){s=d[p];break}}}const c={path:a,name:t.name,component:r,meta:{title:t.title,extend:t.extend,icon:t.icon,keepalive:t.keepalive,menu_type:t.menu_type,type:t.type,url:t.url,addtab:!0}};s?m.addRoute(s,c):m.addRoute(c)},X=e=>{const t=j(e.split("/")),s=[],l=[];for(const a in t)s.push(t[a]),parseInt(a)!=t.length-1&&l.push(s.join("/"));return z(l)};export{ne as a,g as b,N as c,ie as d,te as e,ee as f,K as g,le as h,ae as l,G as m,se as o,J as r,$ as s,E as u};
