import{e as A,y as S,ai as R,v as V,r as B,B as D,m as c,a6 as p,o as f,I as b,J as u,Q as _,h as F,X as v,W as w,s as o,k as q,j as x,l as T,_ as Z,ao as W,Z as j}from"./vue-CBJ4XcuP.js";import{i as a,u as K,_ as L}from"./index-8U1nzPLF.js";function U(l,r,e){return r?/^(1[3-9])\d{9}$/.test(r.toString())?e():e(new Error(a.global.t("validate.Please enter the correct mobile number"))):e()}function X(l,r,e){return r?/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(r.toString())?e():e(new Error(a.global.t("validate.Please enter the correct ID number"))):e()}function J(l,r,e){return r?/^[a-zA-Z][a-zA-Z0-9_]{2,15}$/.test(r)?e():e(new Error(a.global.t("validate.Please enter the correct account"))):e()}function C(l){return/^(?!.*[&<>"'\n\r]).{6,32}$/.test(l)}function M(l,r,e){return r?C(r)?e():e(new Error(a.global.t("validate.Please enter the correct password"))):e()}function Q(l){return/^([^\x00-\xff]|[a-zA-Z_$])([^\x00-\xff]|[a-zA-Z0-9_$])*$/.test(l)}function G(l,r,e){return r?Q(r)?e():e(new Error(a.global.t("validate.Please enter the correct name"))):e()}function H(l,r,e){return!r||r=="<p><br></p>"?e(new Error(a.global.t("validate.Content cannot be empty"))):e()}a.global.t("validate.required"),a.global.t("utils.mobile"),a.global.t("utils.Id number"),a.global.t("utils.account"),a.global.t("utils.password"),a.global.t("utils.variable name"),a.global.t("validate.editor required"),a.global.t("utils.email"),a.global.t("utils.date"),a.global.t("utils.number"),a.global.t("utils.integer"),a.global.t("utils.float");function d({name:l,message:r,title:e,trigger:t="blur"}){if(l=="required")return{required:!0,message:r||a.global.t("Please input field",{field:e}),trigger:t};if(["number","integer","float","date","url","email"].includes(l))return{type:l,message:r||a.global.t("Please enter the correct field",{field:e}),trigger:t};const m={mobile:U,idNumber:X,account:J,password:M,varName:G,editorRequired:H};return m[l]?{required:l=="editorRequired",validator:m[l],trigger:t,message:r}:{}}const O={class:"title"},Y=A({__name:"popupForm",setup(l){const r=K(),e=S(),t=R("baTable"),{t:i}=V.useI18n(),m=B({username:[d({name:"required",title:i("user.user.User name")}),d({name:"account"})],nickname:[d({name:"required",title:i("user.user.nickname")})],group_id:[d({name:"required",message:i("Please select field",{field:i("user.user.grouping")})})],email:[d({name:"email",title:i("user.user.email")})],mobile:[d({name:"mobile"})],password:[{validator:(g,n,s)=>{if(t.form.operate=="Add"){if(!n)return s(new Error(i("Please input field",{field:i("user.user.password")})))}else if(!n)return s();return C(n)?s():s(new Error(i("validate.Please enter the correct password")))},trigger:"blur"}]});return D(()=>t.form.operate,g=>{m.password[0].required=g=="Add"}),(g,n)=>{const s=c("el-form"),P=c("el-scrollbar"),h=c("el-button"),$=c("el-dialog"),E=p("drag"),N=p("zoom"),I=p("loading"),z=p("blur");return f(),b($,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Add","Edit"].includes(o(t).form.operate),onClose:o(t).toggleForm},{header:u(()=>[_((f(),F("div",O,[v(w(o(t).form.operate?o(i)(o(t).form.operate):""),1)])),[[E,[".ba-operate-dialog",".el-dialog__header"]],[N,".ba-operate-dialog"]])]),footer:u(()=>[q("div",{style:x("width: calc(100% - "+o(t).form.labelWidth/1.8+"px)")},[T(h,{onClick:n[1]||(n[1]=y=>o(t).toggleForm(""))},{default:u(()=>[v(w(o(i)("Cancel")),1)]),_:1}),_((f(),b(h,{loading:o(t).form.submitLoading,onClick:n[2]||(n[2]=y=>o(t).onSubmit(e.value)),type:"primary"},{default:u(()=>[v(w(o(t).form.operateIds&&o(t).form.operateIds.length>1?o(i)("Save and edit next item"):o(i)("Save")),1)]),_:1},8,["loading"])),[[z]])],4)]),default:u(()=>[_((f(),b(P,{class:"ba-table-form-scrollbar"},{default:u(()=>[q("div",{class:Z(["ba-operate-form","ba-"+o(t).form.operate+"-form"]),style:x(o(r).layout.shrink?"":"width: calc(100% - "+o(t).form.labelWidth/2+"px)")},[o(t).form.loading?j("",!0):(f(),b(s,{key:0,ref_key:"formRef",ref:e,onKeyup:n[0]||(n[0]=W(y=>o(t).onSubmit(e.value),["enter"])),model:o(t).form.items,"label-position":o(r).layout.shrink?"top":"right","label-width":o(t).form.labelWidth+"px",rules:m},null,8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[I,o(t).form.loading]])]),_:1},8,["model-value","onClose"])}}}),re=L(Y,[["__scopeId","data-v-4a5cf5c8"]]);export{re as default};
